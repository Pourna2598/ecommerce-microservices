classDiagram
    class UserService {
        +registerUser(userData)
        +loginUser(credentials)
        +getUserProfile(userId)
        +updateUserProfile(userId, data)
        +deleteUser(userId)
        +getAllUsers()
        +getUserById(id)
        +updateUser(id, data)
        +deleteUserById(id)
        +getUserStats()
    }

    class User {
        +String id
        +String username
        +String email
        +String password
        +String role
        +Boolean isActive
        +Date createdAt
        +Date updatedAt
        +comparePassword(password)
        +isAdmin()
    }

    class UserRepository {
        +findByEmail(email)
        +findById(id)
        +findAll()
        +save(user)
        +update(id, data)
        +delete(id)
        +getStats()
    }

    class AuthService {
        +generateToken(user)
        +verifyToken(token)
        +hashPassword(password)
        +comparePasswords(plain, hashed)
        +validateServiceToken(token)
        +extractUserFromToken(token)
    }

    class ErrorHandler {
        +handleValidationError(error)
        +handleDuplicateKeyError(error)
        +handleAuthError(error)
    }

    UserService --> UserRepository
    UserService --> AuthService
    UserService --> ErrorHandler
    UserRepository --> User
    AuthService --> User 